import chisel3.iotesters.PeekPokeTester
import org.scalatest._

class SAMTester2(dut: SAM) extends PeekPokeTester(dut) {

  poke(dut.io.valid_in, false)
  step(1)

  poke(dut.io.t, BigInt("126238304966058622268417487065116999845484776053576109500509161826268184136202698801551568013761380717534054534851164138648904527931605160527688095259563605939964364716019515983399209962459578542172100149937763938581219604072733422507180056009672540900709554109516816573779593326332288314873251559077853068444977864803391962580800682760017849589281937637993445539366428356761821065267423102149447628375691862210717202025241630303118559188678304314076943801692528246980959705901641444238894928620825482303431806955690226308773426829503900930529395181208739591967195841536053143145775307050594328881077553168201547776"));
  poke(dut.io.n, BigInt("105501031787233332384122756758266603778476743560955411917822416176198496587768542106324111298877358362935471370411307688396369780869926342220870835454773780018207452754785104210835998019607840506076555470433328092932841999509530726650868739084037873970014238140467428300985471279241137376927519022242882121369"));
  poke(dut.io.b, 65535);
  poke(dut.io.valid_in, true);
  step(1)
  expect(dut.io.valid_out, false)
  step(10000000)
  expect(dut.io.valid_out, true)
  expect(dut.io.result, BigInt("17541905658021644823279796401520845413096614025965239360061534331665081773559753548609085139238675192089714557583482677603898584580049197636794654367333639875842742459913822783315601516979970726450072313282055568802439334311154444991249579191999245552996864250381427683809548814849354863676408631284796509649"))

}
class SAMSpec_LargeInts extends FlatSpec with Matchers {
  "SAM" should "pass" in {
    chisel3.iotesters.Driver(() => new SAM) { c => new SAMTester2(c)} should be (true)
  }
}
